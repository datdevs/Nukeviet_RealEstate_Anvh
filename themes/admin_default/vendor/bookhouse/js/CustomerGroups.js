(self.webpackChunkvue_project=self.webpackChunkvue_project||[]).push([[539],{3982:(e,t,r)=>{"use strict";r.d(t,{CD:()=>l,l8:()=>u,FQ:()=>c,Ny:()=>m,Ug:()=>p,N$:()=>g,_5:()=>d,Ls:()=>f,t9:()=>h,UB:()=>v,Dw:()=>b});var a=window,n=a.script_name,s=a.nv_name_variable,o=a.nv_module_name,i=a.nv_fc_variable,l=n+"?"+s+"="+o+"&"+i+"=customers&location_get=1",u=n+"?"+s+"="+o+"&"+i+"=customers&group_get=1",c=n+"?"+s+"="+o+"&"+i+"=customers&group_add=1",m=n+"?"+s+"="+o+"&"+i+"=customers&group_del=1",p=n+"?"+s+"="+o+"&"+i+"=customers&group_update=1",g=n+"?"+s+"="+o+"&"+i+"=customers&get=1",d=n+"?"+s+"="+o+"&"+i+"=customers&add=1",f=n+"?"+s+"="+o+"&"+i+"=customers&del=1",h=n+"?"+s+"="+o+"&"+i+"=customers&update=1",v=n+"?"+s+"="+o+"&"+i+"=customers&import=1",b=n+"?"+s+"="+o+"&"+i+"=customers&search=1"},202:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(3982);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=window.jQuery;const i={filters:{statusFm:function(e){return e?"Đang hoạt động":"Ngưng hoạt động"}},data:function(){return{TableData:null,page_size:null,page_total:null,current_page:1,FormState:0,DrawerTitle:"Thêm Nhóm Khách Hàng",DrawerVisible:!1,formModel:{title:"",status:1},rulesForm:{title:[{required:!0,message:"Vui lòng nhập tên nhóm khách hàng",trigger:"blur"}]},saveFormState:!1,btnDelState:!0,listDelete:[]}},mounted:function(){this.getGroupData(this.current_page)},methods:{getGroupData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;o.get(a.l8,{page:e}).done((function(e){var r=JSON.parse(e);t.TableData=r.result,t.page_size=r.page_size,t.page_total=r.page_total,t.current_page=r.current_page}))},handleDrawer:function(e){this.DrawerVisible=e},handleSelectionChange:function(e){e.length>0?(this.listDelete=e,this.btnDelState=!1):(this.listDelete=[],this.btnDelState=!0)},handleCurrentPageChange:function(e){this.getGroupData(e)},submitForm:function(e){var t=this,r=this;r.$refs[e].validate((function(n){if(n){r.saveFormState=!0;var s=JSON.stringify(t.formModel);o.post(a.FQ,{data:s}).done((function(t){500!==(t=JSON.parse(t)).code?(r.getGroupData(r.current_page),r.resetForm(e),r.DrawerVisible=!1,r.saveFormState=!1,r.$message({message:t.mess,duration:6e3,type:"success"})):(r.saveFormState=!1,r.$message({message:t.mess,duration:6e3,type:"error"}))})).fail((function(){r.saveFormState=!1,r.$message({message:"Có lỗi xảy ra ở server.",duration:6e3,type:"error"})}))}}))},submitFormEdit:function(e){var t=this,r=this;r.$refs[e].validate((function(n){if(n){r.saveFormState=!0;var s=JSON.stringify(t.formModel);o.post(a.Ug,{data:s}).done((function(t){500!==(t=JSON.parse(t)).code?(r.getGroupData(r.current_page),r.resetForm(e),r.DrawerVisible=!1,r.saveFormState=!1,r.$message({message:t.mess,duration:6e3,type:"success"})):(r.saveFormState=!1,r.$message({message:t.mess,duration:6e3,type:"error"}))})).fail((function(){r.saveFormState=!1,r.$message({message:"Có lỗi xảy ra ở server.",duration:6e3,type:"error"})}))}}))},confirmDel:function(e){var t=this,r=JSON.stringify(e);this.$confirm("Nhóm khách hàng sẽ bị xóa vĩnh viễn?","Chú ý",{confirmButtonText:"Chấp nhận",cancelButtonText:"Hủy bỏ",type:"warning"}).then((function(){o.post(a.Ny,{data:r}).done((function(e){500!==(e=JSON.parse(e)).code?(t.getGroupData(t.current_page),t.$message({message:e.mess,duration:6e3,type:"success"})):t.$message({message:e.mess,duration:6e3,type:"error"})})).fail((function(){t.$message({message:"Có lỗi xảy ra ở server.",duration:6e3,type:"error"})}))}))},resetForm:function(e){this.FormState=0,this.DrawerTitle="Thêm Nhóm Khách Hàng",this.$refs[e].resetFields(),this.resetCurrentForm()},resetCurrentForm:function(){this.formModel={title:"",status:1}},editGroup:function(e){this.FormState=1,this.DrawerTitle="Chỉnh sửa Nhóm Khách Hàng",this.formModel=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),this.handleDrawer(!0)}}};const l=(0,r(1900).Z)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"customer_group"}},[r("el-card",{staticStyle:{"margin-bottom":"20px"}},[r("div",{attrs:{slot:"header"},slot:"header"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleDrawer(!0)}}},[e._v("Thêm nhóm khách hàng")]),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:e.btnDelState},on:{click:function(t){return e.confirmDel(e.listDelete)}}},[e._v("Xóa")])],1),e._v(" "),r("el-table",{attrs:{data:e.TableData,border:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),r("el-table-column",{attrs:{label:"Nhóm khách hàng",prop:"title"}}),e._v(" "),r("el-table-column",{attrs:{label:"Trạng thái",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("statusFm")(t.row.status))+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-button",{staticClass:"is-square",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(r){return r.preventDefault(),e.editGroup(t.row)}}}),e._v(" "),r("el-button",{staticClass:"is-square",attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(r){return r.preventDefault(),e.confirmDel(t.row)}}})],1)]}}])})],1),e._v(" "),r("el-row",{attrs:{type:"flex",justify:"end"}},[r("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next","current-page":e.current_page,total:e.page_total,"page-size":e.page_size},on:{"current-change":e.handleCurrentPageChange}})],1)],1),e._v(" "),r("el-drawer",{attrs:{title:e.DrawerTitle,visible:e.DrawerVisible,size:"35%","append-to-body":""},on:{"update:visible":function(t){e.DrawerVisible=t},closed:function(t){return e.resetForm("groupForm")}}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.saveFormState,expression:"saveFormState"}],staticClass:"Drawer_Body_Inner"},[r("el-form",{ref:"groupForm",attrs:{model:e.formModel,rules:e.rulesForm,"label-position":"top"}},[r("el-form-item",{attrs:{label:"Tên nhóm",prop:"title"}},[r("el-input",{model:{value:e.formModel.title,callback:function(t){e.$set(e.formModel,"title",t)},expression:"formModel.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Trạng thái",prop:"status"}},[r("el-select",{model:{value:e.formModel.status,callback:function(t){e.$set(e.formModel,"status",t)},expression:"formModel.status"}},[r("el-option",{attrs:{label:"Đang hoạt động",value:1}}),e._v(" "),r("el-option",{attrs:{label:"Ngưng hoạt động",value:0}})],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"Drawer_Body_Inner_Footer"},[r("el-button",{on:{click:function(t){return e.handleDrawer(!1)}}},[e._v("Hủy bỏ")]),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-check",disabled:e.saveFormState},on:{click:function(t){0===e.FormState?e.submitForm("groupForm"):e.submitFormEdit("groupForm")}}},[e._v("Lưu lại")])],1)])],1)}),[],!1,null,null,null).exports}}]);