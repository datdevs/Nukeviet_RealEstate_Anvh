(self.webpackChunkvue_project=self.webpackChunkvue_project||[]).push([[425],{3982:(e,t,r)=>{"use strict";r.d(t,{CD:()=>i,l8:()=>c,FQ:()=>u,Ny:()=>h,Ug:()=>d,N$:()=>p,_5:()=>m,Ls:()=>f,t9:()=>g,UB:()=>v,Dw:()=>_});var a=window,n=a.script_name,o=a.nv_name_variable,l=a.nv_module_name,s=a.nv_fc_variable,i=n+"?"+o+"="+l+"&"+s+"=customers&location_get=1",c=n+"?"+o+"="+l+"&"+s+"=customers&group_get=1",u=n+"?"+o+"="+l+"&"+s+"=customers&group_add=1",h=n+"?"+o+"="+l+"&"+s+"=customers&group_del=1",d=n+"?"+o+"="+l+"&"+s+"=customers&group_update=1",p=n+"?"+o+"="+l+"&"+s+"=customers&get=1",m=n+"?"+o+"="+l+"&"+s+"=customers&add=1",f=n+"?"+o+"="+l+"&"+s+"=customers&del=1",g=n+"?"+o+"="+l+"&"+s+"=customers&update=1",v=n+"?"+o+"="+l+"&"+s+"=customers&import=1",_=n+"?"+o+"="+l+"&"+s+"=customers&search=1"},738:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var a=r(18),n=r.n(a);const o={name:"UploadExcelFile",props:{beforeUpload:Function,onSuccess:Function,accept:{type:String,default:".xlsx, .xls, .csv"}},data:function(){return{loading:!1,excelData:{header:null,results:null}}},methods:{eventLock:function(e){e.stopPropagation(),e.preventDefault()},generateData:function(e){var t=e.header,r=e.results;this.excelData.header=t,this.excelData.results=r,this.onSuccess&&this.onSuccess(this.excelData),this.$message({message:"Tập tin đã được tải lên thành công.",duration:6e3,type:"success"})},handleDrop:function(e){if(this.eventLock(e),this.removeDropOverClass(),!this.loading){var t=e.dataTransfer.files;if(1===t.length){var r=t[0];if(!this.isExcel(r))return this.$message({message:"Vui lòng sử dụng tập tin có phần mở rộng được cho phép (.xlsx, .xls, .csv).",duration:6e3,type:"error"}),!1;this.upload(r)}else this.$message({message:"Vui lòng tải lên 1 tập tin duy nhất.",duration:6e3,type:"error"})}},addDropOverClass:function(){this.$refs["droppable-area"].classList.add(this.$style.DropOver)},removeDropOverClass:function(){this.$refs["droppable-area"].classList.remove(this.$style.DropOver)},handleDragover:function(e){this.eventLock(e),this.addDropOverClass(),e.dataTransfer.dropEffect="copy"},handleDragleave:function(){this.removeDropOverClass()},handleUpload:function(){this.$refs["excel-upload-input"].click()},handleFileChange:function(e){var t=e.target.files[0];t&&this.upload(t)},upload:function(e){this.$refs["excel-upload-input"].value=null,(!this.beforeUpload||this.beforeUpload(e))&&this.readerData(e)},readerData:function(e){var t=this;return this.loading=!0,new Promise((function(r,a){var o=new FileReader;o.onload=function(e){var a=e.target.result,o=n().read(a,{type:"array"}),l=o.SheetNames[0],s=o.Sheets[l],i=t.getHeaderRow(s),c=n().utils.sheet_to_json(s);t.generateData({header:i,results:c}),t.loading=!1,r()},o.readAsArrayBuffer(e),o.onerror=a}))},getHeaderRow:function(e){var t,r=[],a=n().utils.decode_range(e["!ref"]),o=a.s.r;for(t=a.s.c;t<=a.e.c;++t){var l=e[n().utils.encode_cell({c:t,r:o})],s="UNKNOWN "+t;l&&l.t&&(s=n().utils.format_cell(l)),r.push(s)}return r},isExcel:function(e){return/\.(xlsx|xls|csv)$/.test(e.name)}}},l={UploadComponent:"_3BPYg",UploadInput:"uUqLF",DropArea:"FeWJY",DropOver:"aq1S5"};var s=r(1900);const i=(0,s.Z)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.$style.UploadComponent},[r("input",{ref:"excel-upload-input",class:e.$style.UploadInput,attrs:{type:"file",accept:e.accept},on:{change:e.handleFileChange}}),e._v(" "),e._t("body",(function(){return[r("div",{ref:"droppable-area",class:e.$style.DropArea,on:{click:e.handleUpload,drop:e.handleDrop,dragover:e.handleDragover,dragenter:e.handleDragover,dragleave:e.handleDragleave}},[r("span",[e._v("Kéo thả tệp Excel hoặc Nhấn vào đây để chọn file")])])]}),{show:e.handleUpload})],2)}),[],!1,(function(e){this.$style=l.locals||l}),null,null).exports;const c={name:"ExcelIcon"};const u=(0,s.Z)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2289.8 2130"}},[r("path",{staticStyle:{fill:"#185c37"},attrs:{d:"M1437.8,1011.8L532.5,852v1180.4c0,53.9,43.7,97.6,97.6,97.6l0,0h1562c53.9,0,97.6-43.7,97.6-97.6l0,0v-434.9L1437.8,1011.8z"}}),e._v(" "),r("path",{staticStyle:{fill:"#21a366"},attrs:{d:"M1437.8,0H630.1c-53.9,0-97.6,43.7-97.6,97.6l0,0v434.9l905.2,532.5l479.2,159.8l372.8-159.8V532.5L1437.8,0z"}}),e._v(" "),r("path",{staticStyle:{fill:"#107c41"},attrs:{d:"M532.5,532.5h905.2V1065H532.5V532.5z"}}),e._v(" "),r("path",{staticStyle:{opacity:"0.1","enable-background":"new"},attrs:{d:"M1180.4,426H532.5v1331.2h647.9c53.8-0.2,97.4-43.8,97.6-97.6v-1136C1277.8,469.8,1234.2,426.2,1180.4,426z"}}),e._v(" "),r("path",{staticStyle:{opacity:"0.2","enable-background":"new"},attrs:{d:"M1127.1,479.2H532.5v1331.2h594.6c53.8-0.2,97.4-43.8,97.6-97.6v-1136C1224.6,523,1181,479.4,1127.1,479.2z"}}),e._v(" "),r("path",{staticStyle:{opacity:"0.2","enable-background":"new"},attrs:{d:"M1127.1,479.2H532.5V1704h594.6c53.8-0.2,97.4-43.8,97.6-97.6V576.9C1224.6,523,1181,479.4,1127.1,479.2z"}}),e._v(" "),r("path",{staticStyle:{opacity:"0.2","enable-background":"new"},attrs:{d:"M1073.9,479.2H532.5V1704h541.4c53.8-0.2,97.4-43.8,97.6-97.6V576.9C1171.3,523,1127.7,479.4,1073.9,479.2z"}}),e._v(" "),r("linearGradient",{attrs:{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",x1:"203.5127",y1:"-1229.0182",x2:"967.9858",y2:"95.0175",gradientTransform:"matrix(1 0 0 1 0 1632)"}},[r("stop",{staticStyle:{"stop-color":"#18884f"},attrs:{offset:"0"}}),e._v(" "),r("stop",{staticStyle:{"stop-color":"#117e43"},attrs:{offset:"0.5"}}),e._v(" "),r("stop",{staticStyle:{"stop-color":"#0b6631"},attrs:{offset:"1"}})],1),e._v(" "),r("path",{staticStyle:{fill:"url(#SVGID_1_)"},attrs:{d:"M97.6,479.2h976.3c53.9,0,97.6,43.7,97.6,97.6v976.3c0,53.9-43.7,97.6-97.6,97.6H97.6c-53.9,0-97.6-43.7-97.6-97.6V576.9C0,523,43.7,479.2,97.6,479.2z"}}),e._v(" "),r("path",{staticStyle:{fill:"#ffffff"},attrs:{d:"M302.3,1382.3l205.3-318.2L319.5,747.7h151.3L573.5,950c9.5,19.2,16,33.5,19.5,42.9h1.3c6.7-15.3,13.8-30.2,21.3-44.7l109.7-200.5h138.9l-192.9,314.5l197.8,319.9H721.4l-118.6-222.1c-5.6-9.4-10.3-19.4-14.2-29.7h-1.8c-3.5,10.1-8.1,19.7-13.7,28.8l-122.1,223L302.3,1382.3L302.3,1382.3z"}}),e._v(" "),r("path",{staticStyle:{fill:"#33c481"},attrs:{d:"M2192.1,0h-754.4v532.5h852V97.6C2289.8,43.7,2246.1,0,2192.1,0L2192.1,0z"}}),e._v(" "),r("path",{staticStyle:{fill:"#107c41"},attrs:{d:"M1437.8,1065h852v532.5h-852V1065z"}})],1)}),[],!1,null,null,null).exports;var h=r(1395),d=r.n(h),p=r(4925),m=r.n(p),f=r(3982),g=window.jQuery;const v={name:"CustomersImport",components:{UploadExcelFile:i,ExcelIcon:u},data:function(){return{fields:[{key:"customer_code",label:"Mã khách hàng",prop:"customer_code",mwidth:"200"},{key:"source",label:"Nguồn khách hàng",prop:"source",mwidth:"200"},{key:"groupid",label:"Nhóm khách hàng",prop:"groupid",mwidth:"200"},{key:"name",label:"Tên khách hàng",prop:"name",mwidth:"200"},{key:"phone",label:"Số điện thoại",prop:"phone",mwidth:"200"},{key:"email",label:"Email",prop:"email",mwidth:"200"},{key:"provinceid",label:"Tỉnh/Thành phố",prop:"provinceid",mwidth:"200"},{key:"districtid",label:"Quận/Huyện",prop:"districtid",mwidth:"200"},{key:"wardid",label:"Phường/Xã",prop:"wardid",mwidth:"200"},{key:"address",label:"Địa chỉ",prop:"address",mwidth:"200"},{key:"desire",label:"Nhu cầu",prop:"desire",mwidth:"200"},{key:"note",label:"Ghi chú",prop:"note",mwidth:"200"}],data:[],loading:!1,success:!1,stateSave:!1,tableNewKey:{"Mã khách hàng":"customer_code","Nguồn khách hàng":"source","Nhóm khách hàng":"groupid","Khách hàng":"name","Số điện thoại":"phone",Email:"email","Tỉnh/Thành phố":"provinceid","Quận/Huyện":"districtid","Phường/Xã":"wardid","Địa chỉ":"address","Nhu cầu":"desire","Ghi chú":"note"},error:[],excelFile:"/themes/admin_default/images/excel-customers-import.xlsx"}},methods:{resetData:function(){return this.loading=!0,this.data=[],this.error=[],this.success=!1,!0},handleSuccess:function(e){e.header;var t=e.results,r=this,a=t.map((function(e,t){var a=d()(e,(function(e,t){return r.tableNewKey[t]}));return a.hasOwnProperty("customer_code")&&""!==a.customer_code||r.error.push('Lỗi: "Mã khách hàng" không được để trống, vui lòng kiểm tra lại file Excel dòng số '.concat(t+2,".")),a.hasOwnProperty("name")&&""!==a.name||r.error.push('Lỗi: "Tên khách hàng" không được để trống, vui lòng kiểm tra lại file Excel dòng số '.concat(t+2,".")),a.hasOwnProperty("phone")&&""!==a.phone||r.error.push('Lỗi: "Số điện thoại" không được để trống, vui lòng kiểm tra lại file Excel dòng số '.concat(t+2,".")),a.hasOwnProperty("email")&&""!==a.email||r.error.push('Lỗi: "Email" không được để trống, vui lòng kiểm tra lại file Excel dòng số '.concat(t+2,".")),a=m()(a,(function(e,t){return String(e)}))}));this.data=a,this.loading=!1},handleSaveData:function(){var e=this;e.stateSave=!0;var t=JSON.stringify(this.data);g.post(f.UB,{data:t}).done((function(t){500!==(t=JSON.parse(t)).code?(e.stateSave=!1,e.data=[],e.error=[],e.success=!0,e.$message({message:t.mess,duration:6e3,type:"success"}),e.$emit("update")):(e.stateSave=!1,e.$message({message:t.mess,duration:6e3,type:"error"}),e.$emit("update"))})).fail((function(){e.stateSave=!1,e.$message({message:"Có lỗi xảy ra ở server, danh sách vẫn chưa được nhập.",duration:6e3,type:"error"}),e.$emit("update")}))}}},_={UploadWrap:"_1FRwZ",TableWrap:"oNcSU",SuccessNoti:"_7PPiw",FlexCenter:"_29LlK",Mb10:"_1Ry7k",Mb30:"Ytg89",FileLink:"_3t2_d"};const b=(0,s.Z)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("div",[r("el-alert",{class:e.$style.Mb10,attrs:{title:"Mẫu file Excel import khách hàng:",type:"info","show-icon":"",closable:!1}},[r("a",{class:e.$style.FileLink,attrs:{href:e.excelFile}},[r("excel-icon"),e._v("Danh sách khách hàng.xlsx")],1)]),e._v(" "),r("el-alert",{attrs:{title:"Hướng dẫn:",type:"info","show-icon":""}},[r("p",[r("strong",[e._v("Mã khách hàng, Tên khách hàng, Số điện thoại, Email:")]),e._v(" Bắt buộc nhập, không được để trống.")]),e._v(" "),r("p",[r("strong",[e._v("Tỉnh/Thành phố/Quận/Huyện/Phường/Xã:")]),e._v(" Nhập chính xác tên riêng nếu sai dữ liệu sẽ không được\n        nhập (ví dụ: Hà Nội, Hồ Chí Minh, Nha Trang).\n      ")]),e._v(" "),r("p",[r("strong",[e._v("Nhóm khách hàng:")]),e._v(" Nhập chính xác tên nhóm ở tab nhóm khách hàng.")])])],1),e._v(" "),r("div",{class:e.$style.UploadWrap},[r("UploadExcelFile",{attrs:{"on-success":e.handleSuccess,"before-upload":e.resetData}})],1),e._v(" "),e.data.length>0?r("div",{class:e.$style.TableWrap},[e._l(e.error,(function(t,a){return r("el-alert",{key:"error_"+a,class:e.$style.Mb10,attrs:{title:t,type:"error","show-icon":"",closable:!1}})})),e._v(" "),r("div",{class:e.$style.Mb30},[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-download",disabled:e.error.length>0,loading:e.stateSave},on:{click:e.handleSaveData}},[e._v("Nhập dữ liệu")])],1),e._v(" "),r("el-table",{attrs:{data:e.data,border:"",fit:"","show-overflow-tooltip":"","max-height":528}},e._l(e.fields,(function(e){return r("el-table-column",{key:"csi_"+e.key,attrs:{label:e.label,prop:e.prop,"min-width":e.mwidth}})})),1)],2):e._e(),e._v(" "),0===e.data.length&&e.success?r("div",{class:e.$style.SuccessNoti},[r("el-alert",{attrs:{title:"Danh sách đã được thêm vào thành công, bạn có thể click Quay lại để kiểm tra danh sách vừa thêm vào hoặc tiếp tục chọn file để thêm danh sách mới.",type:"success","show-icon":"",closable:!1}})],1):e._e()])}),[],!1,(function(e){this.$style=_.locals||_}),null,null).exports;function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=window.jQuery;const D={components:{CustomersImport:b},data:function(){return{searchData:{name:"",phone:"",groupid:""},TableData:null,page_size:null,page_total:null,current_page:1,FormState:0,DrawerTitle:"Thêm Khách Hàng",DrawerVisible:!1,DialogVisible:!1,formModel:{groupid:null,customer_code:null,name:null,phone:null,email:null,provinceid:null,districtid:null,wardid:null,address:null,note:null,source:null,desire:null},rulesForm:{customer_code:[{required:!0,message:"Vui lòng nhập mã khách hàng",trigger:"blur"}],name:[{required:!0,message:"Vui lòng nhập tên khách hàng",trigger:"blur"}],phone:[{required:!0,message:"Vui lòng nhập số điện thoại khách hàng",trigger:"blur"}],email:[{required:!0,message:"Vui lòng nhập email khách hàng",trigger:"blur"}]},saveFormState:!1,btnDelState:!0,listGroup:[],listDelete:[],array_province,array_district:[],array_ward:[],searchState:!1}},computed:{expire_time_pickerOptions:function(){var e=this;return{disabledDate:function(t){return e.formModel.start_date?t.getTime()<e.formModel.start_date:t.getTime()<Date.now()}}}},mounted:function(){this.getGroupData(),this.getCustomerData(this.current_page)},methods:{handleExcelImport:function(){this.DialogVisible=!0},getGroupData:function(){var e=this;k.get(f.l8,{page:0}).done((function(t){var r=JSON.parse(t);e.listGroup=r.result}))},getCustomerData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;k.get(f.N$,{page:e}).done((function(e){var r=JSON.parse(e);t.TableData=r.result,t.page_size=r.page_size,t.page_total=r.page_total,t.current_page=r.current_page}))},handleDrawer:function(e){this.DrawerVisible=e},handleSelectionChange:function(e){e.length>0?(this.listDelete=e,this.btnDelState=!1):(this.listDelete=[],this.btnDelState=!0)},handleCurrentPageChange:function(e){this.getCustomerData(e)},handlerProvince:function(e){var t=this;k.get(f.CD,{province:e}).done((function(e){var r=JSON.parse(e);t.array_district=Object.values(r)}))},handlerDistrict:function(e){var t=this;k.get(f.CD,{district:e}).done((function(e){var r=JSON.parse(e);t.array_ward=Object.values(r)}))},resetForm:function(e){this.FormState=0,this.DrawerTitle="Thêm Khách Hàng",this.$refs[e].resetFields(),this.resetCurrentForm()},resetCurrentForm:function(){this.formModel={groupid:null,customer_code:null,name:null,phone:null,email:null,provinceid:null,districtid:null,wardid:null,address:null,note:null,source:null,desire:null}},editGroup:function(e){this.FormState=1,this.DrawerTitle="Chỉnh sửa Khách Hàng",this.formModel=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),this.handleDrawer(!0)},submitForm:function(e){var t=this,r=this;r.$refs[e].validate((function(a){if(a){r.saveFormState=!0;var n=JSON.stringify(t.formModel);k.post(f._5,{data:n}).done((function(t){500!==(t=JSON.parse(t)).code?(r.getCustomerData(r.current_page),r.resetForm(e),r.DrawerVisible=!1,r.saveFormState=!1,r.$message({message:t.mess,duration:6e3,type:"success"})):(r.saveFormState=!1,r.$message({message:t.mess,duration:6e3,type:"error"}))})).fail((function(){r.saveFormState=!1,r.$message({message:"Có lỗi xảy ra ở server.",duration:6e3,type:"error"})}))}}))},submitFormEdit:function(e){var t=this,r=this;r.$refs[e].validate((function(a){if(a){r.saveFormState=!0;var n=JSON.stringify(t.formModel);k.post(f.t9,{data:n}).done((function(t){500!==(t=JSON.parse(t)).code?(r.getCustomerData(r.current_page),r.resetForm(e),r.DrawerVisible=!1,r.saveFormState=!1,r.$message({message:t.mess,duration:6e3,type:"success"})):(r.saveFormState=!1,r.$message({message:t.mess,duration:6e3,type:"error"}))})).fail((function(){r.saveFormState=!1,r.$message({message:"Có lỗi xảy ra ở server.",duration:6e3,type:"error"})}))}}))},confirmDel:function(e){var t=this,r=JSON.stringify(e);this.$confirm("Thông tin khách hàng sẽ bị xóa vĩnh viễn?","Chú ý",{confirmButtonText:"Chấp nhận",cancelButtonText:"Hủy bỏ",type:"warning"}).then((function(){k.post(f.Ls,{data:r}).done((function(e){500!==(e=JSON.parse(e)).code?(t.getCustomerData(t.current_page),t.$message({message:e.mess,duration:6e3,type:"success"})):t.$message({message:e.mess,duration:6e3,type:"error"})})).fail((function(){t.$message({message:"Có lỗi xảy ra ở server.",duration:6e3,type:"error"})}))}))},formatGroupColumn:function(e){var t=this.listGroup.find((function(t){return t.id===e}));return t?t.title:""},handleSearching:function(){var e=this,t=JSON.stringify(e.searchData);""===this.searchData.name&&""===this.searchData.phone&&""===this.searchData.groupid||(this.searchState=!0,k.get(f.Dw,{data:t}).done((function(t){var r=JSON.parse(t);e.TableData=r})))},handleSearchClose:function(){this.getCustomerData(1),this.searchState=!1,this.searchData={name:"",phone:"",groupid:""}}}};const S=(0,s.Z)(D,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"customer_list"}},[r("el-card",{staticStyle:{"margin-bottom":"20px"}},[r("div",{attrs:{slot:"header"},slot:"header"},[r("el-row",[r("el-form",{attrs:{inline:!0,model:e.searchData}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"Tên khách hàng"},model:{value:e.searchData.name,callback:function(t){e.$set(e.searchData,"name",t)},expression:"searchData.name"}})],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"Số điện thoại"},model:{value:e.searchData.phone,callback:function(t){e.$set(e.searchData,"phone",t)},expression:"searchData.phone"}})],1),e._v(" "),r("el-form-item",[r("el-select",{attrs:{placeholder:"Nhóm khách hàng"},model:{value:e.searchData.groupid,callback:function(t){e.$set(e.searchData,"groupid",t)},expression:"searchData.groupid"}},e._l(e.listGroup,(function(e){return r("el-option",{key:"group_option_"+e.id,attrs:{label:e.title,value:e.id}})})),1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearching}},[e._v("Tìm kiếm")])],1),e._v(" "),r("el-form-item",[e.searchState?r("el-button",{attrs:{type:"danger",icon:"el-icon-close"},on:{click:e.handleSearchClose}},[e._v("Xóa tìm kiếm")]):e._e()],1)],1)],1),e._v(" "),r("el-row",[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleDrawer(!0)}}},[e._v("Thêm khách hàng")]),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:e.btnDelState},on:{click:function(t){return e.confirmDel(e.listDelete)}}},[e._v("Xóa")]),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.handleExcelImport}},[e._v("Nhập danh sách khách hàng")])],1)],1),e._v(" "),r("el-table",{attrs:{data:e.TableData,border:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),r("el-table-column",{attrs:{label:"Mã khách hàng",prop:"customer_code",width:128}}),e._v(" "),r("el-table-column",{attrs:{label:"Khách hàng",prop:"name","min-width":200}}),e._v(" "),r("el-table-column",{attrs:{label:"Nguồn khách hàng",prop:"source","min-width":200}}),e._v(" "),r("el-table-column",{attrs:{label:"Nhóm khách hàng",prop:"groupid","min-width":200},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatGroupColumn(t.row.groupid)))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"Điện thoại",prop:"phone","min-width":150}}),e._v(" "),r("el-table-column",{attrs:{label:"Email",prop:"email","min-width":150}}),e._v(" "),r("el-table-column",{attrs:{label:"Địa chỉ",prop:"address","min-width":150}}),e._v(" "),r("el-table-column",{attrs:{label:"Nhu cầu",prop:"desire","min-width":150}}),e._v(" "),r("el-table-column",{attrs:{label:"Ghi chú",prop:"note","min-width":150}}),e._v(" "),r("el-table-column",{attrs:{width:"90",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-button",{staticClass:"is-square",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(r){return r.preventDefault(),e.editGroup(t.row)}}}),e._v(" "),r("el-button",{staticClass:"is-square",attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(r){return r.preventDefault(),e.confirmDel(t.row)}}})],1)]}}])})],1),e._v(" "),r("el-row",{attrs:{type:"flex",justify:"end"}},[r("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next","current-page":e.current_page,total:e.page_total,"page-size":e.page_size},on:{"current-change":e.handleCurrentPageChange}})],1)],1),e._v(" "),r("el-drawer",{attrs:{title:e.DrawerTitle,visible:e.DrawerVisible,size:"35%","append-to-body":""},on:{"update:visible":function(t){e.DrawerVisible=t},closed:function(t){return e.resetForm("customerForm")}}},[r("div",{staticClass:"Drawer_Body_Inner"},[r("el-form",{ref:"customerForm",attrs:{model:e.formModel,rules:e.rulesForm,"label-position":"top"}},[r("el-form-item",{attrs:{label:"Mã khách hàng",prop:"customer_code"}},[r("el-input",{model:{value:e.formModel.customer_code,callback:function(t){e.$set(e.formModel,"customer_code",t)},expression:"formModel.customer_code"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Tên khách hàng",prop:"name"}},[r("el-input",{model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Nhóm khách hàng",prop:"groupid"}},[r("el-select",{staticStyle:{width:"100%"},model:{value:e.formModel.groupid,callback:function(t){e.$set(e.formModel,"groupid",t)},expression:"formModel.groupid"}},e._l(e.listGroup,(function(e){return r("el-option",{key:"group_option_"+e.id,attrs:{label:e.title,value:e.id}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Số điện thoại",prop:"phone"}},[r("el-input",{model:{value:e.formModel.phone,callback:function(t){e.$set(e.formModel,"phone",t)},expression:"formModel.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Email",prop:"email"}},[r("el-input",{model:{value:e.formModel.email,callback:function(t){e.$set(e.formModel,"email",t)},expression:"formModel.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Tỉnh/Thành phố",prop:"provinceid"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},on:{change:e.handlerProvince},model:{value:e.formModel.provinceid,callback:function(t){e.$set(e.formModel,"provinceid",t)},expression:"formModel.provinceid"}},e._l(e.array_province,(function(e){return r("el-option",{key:e.alias,attrs:{label:e.name,value:e.provinceid}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Quận/Huyện",prop:"districtid"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","no-data-text":"Chọn Tỉnh/Thành phố"},on:{change:e.handlerDistrict},model:{value:e.formModel.districtid,callback:function(t){e.$set(e.formModel,"districtid",t)},expression:"formModel.districtid"}},e._l(e.array_district,(function(e){return r("el-option",{key:e.alias,attrs:{label:e.name,value:e.districtid}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Phường/Xã",prop:"wardid"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","no-data-text":"Chọn Quận/Huyện"},model:{value:e.formModel.wardid,callback:function(t){e.$set(e.formModel,"wardid",t)},expression:"formModel.wardid"}},e._l(e.array_ward,(function(e){return r("el-option",{key:e.alias,attrs:{label:e.name,value:e.wardid}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Địa chỉ",prop:"address"}},[r("el-input",{model:{value:e.formModel.address,callback:function(t){e.$set(e.formModel,"address",t)},expression:"formModel.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Nguồn khách hàng",prop:"source"}},[r("el-input",{model:{value:e.formModel.source,callback:function(t){e.$set(e.formModel,"source",t)},expression:"formModel.source"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Nhu cầu",prop:"desire"}},[r("el-input",{model:{value:e.formModel.desire,callback:function(t){e.$set(e.formModel,"desire",t)},expression:"formModel.desire"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Ghi chú",prop:"note"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:3}},model:{value:e.formModel.note,callback:function(t){e.$set(e.formModel,"note",t)},expression:"formModel.note"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"Drawer_Body_Inner_Footer"},[r("el-button",{on:{click:function(t){return e.handleDrawer(!1)}}},[e._v("Hủy bỏ")]),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-check",loading:e.saveFormState},on:{click:function(t){0===e.FormState?e.submitForm("customerForm"):e.submitFormEdit("customerForm")}}},[e._v("Lưu lại")])],1)]),e._v(" "),r("el-dialog",{attrs:{title:"Nhập danh sách khách hàng",visible:e.DialogVisible,"append-to-body":"",fullscreen:""},on:{"update:visible":function(t){e.DialogVisible=t}}},[r("CustomersImport",{on:{update:function(t){return e.getCustomerData(e.current_page)}}})],1)],1)}),[],!1,null,null,null).exports},5382:()=>{},2095:()=>{},1219:()=>{}}]);